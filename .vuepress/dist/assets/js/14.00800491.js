(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{419:function(t,a,e){"use strict";e.r(a);var s=e(56),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"environments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#environments"}},[t._v("#")]),t._v(" Environments")]),t._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#introduction"}},[t._v("Introduction")])]),e("li",[e("a",{attrs:{href:"#creating-environments"}},[t._v("Creating Environments")])]),e("li",[e("a",{attrs:{href:"#opening-environments"}},[t._v("Opening Environments")])]),e("li",[e("a",{attrs:{href:"#environment-variables"}},[t._v("Environment Variables")]),e("ul",[e("li",[e("a",{attrs:{href:"#vapor-s-default-environment-variables"}},[t._v("Vapor's Default Environment Variables")])]),e("li",[e("a",{attrs:{href:"#updating-environment-variables"}},[t._v("Updating Environment Variables")])]),e("li",[e("a",{attrs:{href:"#reserved-environment-variables"}},[t._v("Reserved Environment Variables")])])])]),e("li",[e("a",{attrs:{href:"#secrets"}},[t._v("Secrets")]),e("ul",[e("li",[e("a",{attrs:{href:"#passport-keys"}},[t._v("Passport Keys")])])])]),e("li",[e("a",{attrs:{href:"#vanity-urls"}},[t._v("Vanity URLs")])]),e("li",[e("a",{attrs:{href:"#custom-domains"}},[t._v("Custom Domains")]),e("ul",[e("li",[e("a",{attrs:{href:"#multiple-domains"}},[t._v("Multiple Domains")])]),e("li",[e("a",{attrs:{href:"#wildcard-subdomains"}},[t._v("Wildcard Subdomains")])])])]),e("li",[e("a",{attrs:{href:"#maintenance-mode"}},[t._v("Maintenance Mode")]),e("ul",[e("li",[e("a",{attrs:{href:"#customizing-the-maintenance-mode-screen"}},[t._v("Customizing The Maintenance Mode Screen")])])])]),e("li",[e("a",{attrs:{href:"#commands"}},[t._v("Commands")])]),e("li",[e("a",{attrs:{href:"#memory"}},[t._v("Memory")])]),e("li",[e("a",{attrs:{href:"#concurrency"}},[t._v("Concurrency")])]),e("li",[e("a",{attrs:{href:"#provisioned-concurrency"}},[t._v("Provisioned Concurrency")])]),e("li",[e("a",{attrs:{href:"#prewarming"}},[t._v("Prewarming")])]),e("li",[e("a",{attrs:{href:"#firewall"}},[t._v("Firewall")]),e("ul",[e("li",[e("a",{attrs:{href:"#rate-limit"}},[t._v("rate-limit")])]),e("li",[e("a",{attrs:{href:"#bot-control"}},[t._v("bot-control")])])])]),e("li",[e("a",{attrs:{href:"#timeout"}},[t._v("Timeout")])]),e("li",[e("a",{attrs:{href:"#scheduler"}},[t._v("Scheduler")])]),e("li",[e("a",{attrs:{href:"#mail"}},[t._v("Mail")])]),e("li",[e("a",{attrs:{href:"#metrics"}},[t._v("Metrics")]),e("ul",[e("li",[e("a",{attrs:{href:"#alarms"}},[t._v("Alarms")])])])]),e("li",[e("a",{attrs:{href:"#runtime"}},[t._v("Runtime")]),e("ul",[e("li",[e("a",{attrs:{href:"#native-runtimes"}},[t._v("Native Runtimes")])]),e("li",[e("a",{attrs:{href:"#docker-runtimes"}},[t._v("Docker Runtimes")])])])]),e("li",[e("a",{attrs:{href:"#octane"}},[t._v("Octane")])]),e("li",[e("a",{attrs:{href:"#gateway-versions"}},[t._v("Gateway Versions")]),e("ul",[e("li",[e("a",{attrs:{href:"#http-to-https-redirection-with-api-gateway-v2"}},[t._v("HTTP to HTTPS Redirection With API Gateway v2")])])])]),e("li",[e("a",{attrs:{href:"#custom-vpcs"}},[t._v("Custom VPCs")])]),e("li",[e("a",{attrs:{href:"#deleting-environments"}},[t._v("Deleting Environments")])])])]),e("p"),t._v(" "),e("h2",{attrs:{id:"introduction"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[t._v("#")]),t._v(" Introduction")]),t._v(" "),e("p",[t._v("As you may have noticed, projects do not contain much information or resources themselves. All of your deployments and invoked commands are stored within environments. Each project may have as many environments as needed.")]),t._v(" "),e("p",[t._v('Typically, you will have an environment for "production", and a "staging" environment for testing your application. However, don\'t be afraid to create more environments for testing new features without interrupting your main staging environment.')]),t._v(" "),e("h2",{attrs:{id:"creating-environments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#creating-environments"}},[t._v("#")]),t._v(" Creating Environments")]),t._v(" "),e("p",[t._v("Environments may be created using the "),e("code",[t._v("env")]),t._v(" Vapor CLI command:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("vapor "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" my-environment\n")])])]),e("p",[t._v("This command will add a new environment entry to your project's "),e("code",[t._v("vapor.yml")]),t._v(" file that you may deploy when ready:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environments")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("production")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("my-environment")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])]),e("p",[t._v("In addition to our native runtimes, Vapor supports Docker image deployments. If you would like an environment to use a Docker image runtime instead of the default Vapor runtime, use the "),e("code",[t._v("--docker")]),t._v(" option when creating your environment:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("vapor "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" my-environment --docker\n")])])]),e("p",[t._v("This command will create a "),e("code",[t._v("my-environment.Dockerfile")]),t._v(" file in your application's root directory.")]),t._v(" "),e("h2",{attrs:{id:"opening-environments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#opening-environments"}},[t._v("#")]),t._v(" Opening Environments")]),t._v(" "),e("p",[t._v("Environments may be opened in your default browser using the Vapor CLI's "),e("code",[t._v("open")]),t._v(" command:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("vapor "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),t._v(" my-environment\n")])])]),e("h2",{attrs:{id:"environment-variables"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#environment-variables"}},[t._v("#")]),t._v(" Environment Variables")]),t._v(" "),e("p",[t._v("Each environment contains a set of environment variables that provide crucial information to your application during execution, just like the variables present in your application's local "),e("code",[t._v(".env")]),t._v(" file.")]),t._v(" "),e("h3",{attrs:{id:"vapor-s-default-environment-variables"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vapor-s-default-environment-variables"}},[t._v("#")]),t._v(" Vapor's Default Environment Variables")]),t._v(" "),e("p",[t._v("Vapor automatically injects a variety of environment variables based on your environment's configured cache, database, etc. As an example, by adding a "),e("code",[t._v("cache")]),t._v(" or "),e("code",[t._v("database")]),t._v(" key to your "),e("code",[t._v("vapor.yml")]),t._v(" file, Vapor will inject the necessary "),e("code",[t._v("CACHE_*")]),t._v(" and "),e("code",[t._v("DB_*")]),t._v(" environment variables.")]),t._v(" "),e("p",[t._v("Here is the full list of environment variables injected by Vapor on your environment:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[e("code",[t._v(".env")]),t._v(" Value")]),t._v(" "),e("th",[e("code",[t._v("env()")]),t._v(" Value")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v("APP_ENV")])]),t._v(" "),e("td",[t._v("Environment name")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("APP_DEBUG")])]),t._v(" "),e("td",[t._v("False")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("APP_LOG_LEVEL")])]),t._v(" "),e("td",[t._v("Debug")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("APP_URL")])]),t._v(" "),e("td",[t._v("Vanity domain, or custom domain if exists")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("ASSET_URL")])]),t._v(" "),e("td",[t._v("CloudFront")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("AWS_BUCKET")])]),t._v(" "),e("td",[t._v("Storage resource if exists")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("BROADCAST_DRIVER")])]),t._v(" "),e("td",[t._v("Pusher")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("CACHE_DRIVER")])]),t._v(" "),e("td",[t._v("DynamoDB, or cache (Redis) resource if exists")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("DB_*")])]),t._v(" "),e("td",[t._v("Database (MySQL, Postgresql, etc) resource if exists")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("DYNAMODB_CACHE_TABLE")])]),t._v(" "),e("td",[e("code",[t._v("vapor_cache")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("FILESYSTEM_DRIVER")])]),t._v(" "),e("td",[t._v("S3")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("FILESYSTEM_CLOUD")])]),t._v(" "),e("td",[t._v("S3")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("LOG_CHANNEL")])]),t._v(" "),e("td",[t._v("Stderr")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("MAIL_DRIVER")])]),t._v(" "),e("td",[t._v("SES")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("MAIL_MAILER")])]),t._v(" "),e("td",[t._v("SES")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("MAIL_FROM_ADDRESS")])]),t._v(" "),e("td",[e("code",[t._v("hello@example.com")]),t._v(" or "),e("code",[t._v("hello@custom-domain.com")]),t._v(" if exists")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("MAIL_FROM_NAME")])]),t._v(" "),e("td",[e("code",[t._v("your_project_name")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("MIX_URL")])]),t._v(" "),e("td",[t._v("CloudFront")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("QUEUE_CONNECTION")])]),t._v(" "),e("td",[t._v("SQS")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("SCHEDULE_CACHE_DRIVER")])]),t._v(" "),e("td",[t._v("DynamoDB")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("SESSION_DRIVER")])]),t._v(" "),e("td",[t._v("Cookie")])])])]),t._v(" "),e("p",[t._v("You will not see these environment variables when you manage your environment via Vapor CLI or Vapor UI, and any variables you manually define will override Vapor's automatically injected variables.")]),t._v(" "),e("h3",{attrs:{id:"updating-environment-variables"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#updating-environment-variables"}},[t._v("#")]),t._v(" Updating Environment Variables")]),t._v(" "),e("p",[t._v("You may update an environment's variables via the Vapor UI or using the "),e("code",[t._v("env:pull")]),t._v(" and "),e("code",[t._v("env:push")]),t._v(" CLI commands. The "),e("code",[t._v("env:pull")]),t._v(" command may be used to pull down an environment file for a given environment:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("vapor env:pull production\n")])])]),e("p",[t._v("Once this command has been executed, a "),e("code",[t._v(".env.{environment}")]),t._v(" file will be placed in your application's root directory. To update the environment's variables, simply open and edit this file. When you are done editing the variables, use the "),e("code",[t._v("env:push")]),t._v(" command to push the variables back to Vapor:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("vapor env:push production\n")])])]),e("p",[t._v("If you are using the DotEnv library's "),e("a",{attrs:{href:"https://github.com/vlucas/phpdotenv#nesting-variables",target:"_blank",rel:"noopener noreferrer"}},[t._v("variable nesting"),e("OutboundLink")],1),t._v(" feature to reference default environment variables that Vapor is injecting, you should replace these references with literal values instead. Since Vapor's injected environment variables do not belong to the environment file, they can not be referenced using the nesting feature.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Variables & Deployments")]),t._v(" "),e("p",[t._v("After updating an environment's variables, the new variables will not be utilized until the application is deployed again. In addition, when rolling back to a previous deployment, Vapor will use the variables as they existed at the time the deployment you're rolling back to was originally deployed.")])]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("Environment Variable Limits")]),t._v(" "),e("p",[t._v('Due to AWS Lambda limitations, your environment variables may only be 4kb in total. You should use "secrets" to store very large environment variables.')])]),t._v(" "),e("h3",{attrs:{id:"reserved-environment-variables"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reserved-environment-variables"}},[t._v("#")]),t._v(" Reserved Environment Variables")]),t._v(" "),e("p",[t._v("The following environment variables are reserved and may not be added to your environment:")]),t._v(" "),e("ul",[e("li",[t._v("_HANDLER")]),t._v(" "),e("li",[t._v("AWS_ACCESS_KEY_ID")]),t._v(" "),e("li",[t._v("AWS_DEFAULT_REGION")]),t._v(" "),e("li",[t._v("AWS_EXECUTION_ENV")]),t._v(" "),e("li",[t._v("AWS_LAMBDA_FUNCTION_MEMORY_SIZE")]),t._v(" "),e("li",[t._v("AWS_LAMBDA_FUNCTION_NAME")]),t._v(" "),e("li",[t._v("AWS_LAMBDA_FUNCTION_VERSION")]),t._v(" "),e("li",[t._v("AWS_LAMBDA_LOG_GROUP_NAME")]),t._v(" "),e("li",[t._v("AWS_LAMBDA_LOG_STREAM_NAME")]),t._v(" "),e("li",[t._v("AWS_LAMBDA_RUNTIME_API")]),t._v(" "),e("li",[t._v("AWS_REGION")]),t._v(" "),e("li",[t._v("AWS_SECRET_ACCESS_KEY")]),t._v(" "),e("li",[t._v("AWS_SESSION_TOKEN")]),t._v(" "),e("li",[t._v("LAMBDA_RUNTIME_DIR")]),t._v(" "),e("li",[t._v("LAMBDA_TASK_ROOT")]),t._v(" "),e("li",[t._v("TZ")])]),t._v(" "),e("p",[t._v("In addition, environment variables should not contain "),e("code",[t._v("AWS_ACCESS_KEY_ID")]),t._v(", "),e("code",[t._v("AWS_SECRET_ACCESS_KEY")]),t._v(", or "),e("code",[t._v("AWS_SESSION_TOKEN")]),t._v(" in their names. For example: "),e("code",[t._v("MY_SERVICE_AWS_SECRET_ACCESS_KEY")]),t._v(".")]),t._v(" "),e("h2",{attrs:{id:"secrets"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#secrets"}},[t._v("#")]),t._v(" Secrets")]),t._v(" "),e("p",[t._v('Due to AWS Lambda limitations, your environment variables may only be 4kb in total. However, "secrets" may be much larger, making them a perfect way to store large environment variables such as Laravel Passport keys. You may create secrets via the Vapor UI or the '),e("code",[t._v("secret")]),t._v(" CLI command:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("vapor secret production\n")])])]),e("p",[t._v("In addition, you may provide a "),e("code",[t._v("--name")]),t._v(" or a "),e("code",[t._v("--value")]),t._v(" option to specify the name or the value that should be assigned to the secret:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("vapor secret production --name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my-key"')]),t._v(" --value"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my-value"')]),t._v("\n")])])]),e("p",[t._v("Behind the scenes, your secrets are stored as a "),e("code",[t._v("SecureString")]),t._v(" in "),e("a",{attrs:{href:"https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-parameter-store.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("AWS Systems Manager (SSM) > Parameter Store"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Secrets & Deployments")]),t._v(" "),e("p",[t._v("After updating an environment's secrets, the new secrets will not be utilized until the application is deployed again using the "),e("code",[t._v("vapor deploy")]),t._v(" CLI command. In addition, when rolling back to a previous deployment, Vapor will use the secrets as they existed at the time the deployment you're rolling back to was originally deployed.")])]),t._v(" "),e("h3",{attrs:{id:"passport-keys"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#passport-keys"}},[t._v("#")]),t._v(" Passport Keys")]),t._v(" "),e("p",[t._v("Storing Laravel Passport keys is a common use-case for secrets. You may easily add your project's Passport keys as secrets using the "),e("code",[t._v("secret:passport")]),t._v(" CLI command:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("vapor secret:passport production\n")])])]),e("h2",{attrs:{id:"vanity-urls"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vanity-urls"}},[t._v("#")]),t._v(" Vanity URLs")]),t._v(" "),e("p",[t._v('Each environment is assigned a unique "vanity URL" which you may use to access the application immediately after it is deployed. When serving these URLs, Vapor automatically adds "no-index" headers to the response so they are not indexed by search engines.')]),t._v(" "),e("p",[t._v("In addition, these secret URLs will continue to work even when an application is in maintenance mode, allowing you to test your application before disabling maintenance mode and restoring general access.")]),t._v(" "),e("h2",{attrs:{id:"custom-domains"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#custom-domains"}},[t._v("#")]),t._v(" Custom Domains")]),t._v(" "),e("p",[t._v("Of course, as cool as they are, you don't want to share your vanity URL with the world. You likely want to attach your own custom domain to an environment. To do so, you'll first need to create a "),e("RouterLink",{attrs:{to:"/1.0/domains/dns.html"}},[t._v("DNS zone")]),t._v(" for the domain. Next, you need to create a "),e("RouterLink",{attrs:{to:"/1.0/domains/certificates.html"}},[t._v("certificate")]),t._v(" for the domain. All Vapor applications are required to utilize SSL. Don't worry, Vapor's certificates are free and automatically renew.")],1),t._v(" "),e("p",[t._v("After creating a certificate, you may attach the domain to your environment using the "),e("code",[t._v("domain")]),t._v(" configuration option in your "),e("code",[t._v("vapor.yml")]),t._v(" file. When attaching a domain to an environment, it is not necessary to provide the "),e("code",[t._v("www")]),t._v(" sub-domain:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environments")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("production")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("domain")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" example.com\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])]),e("p",[t._v("During deployment, Vapor will configure the environment to handle requests on this domain and automatically add the necessary DNS records to the "),e("RouterLink",{attrs:{to:"/1.0/domains/dns.html"}},[t._v("DNS zone")]),t._v(".")],1),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("Self-Managed Domains")]),t._v(" "),e("p",[t._v("If you self-manage your domain's DNS records, Vapor will not be able to update the domain's DNS records automatically. Therefore, you should run the "),e("code",[t._v("vapor record:list domain-name.com")]),t._v(" command to view the records that Vapor indicates are required for your domain and update your DNS records accordingly.")])]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("Custom Domain Provisioning Time")]),t._v(" "),e("p",[t._v("Due to the nature of AWS CloudFront, custom domains often take 30-45 minutes to become fully active. So, do not worry if your custom domain is not immediately accessible after deployment.")])]),t._v(" "),e("h3",{attrs:{id:"multiple-domains"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#multiple-domains"}},[t._v("#")]),t._v(" Multiple Domains")]),t._v(" "),e("p",[t._v("Vapor allows you to attach multiple domains to a single project. Before doing so, ensure you have a valid certificate for each of the domains:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environments")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("production")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("domain")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" example1.com\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" example2.com\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])]),e("h3",{attrs:{id:"wildcard-subdomains"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#wildcard-subdomains"}},[t._v("#")]),t._v(" Wildcard Subdomains")]),t._v(" "),e("p",[t._v("You may attach a domain that supports wildcard subdomains to a Vapor environment if you have a valid certificate for the domain. To attach a wildcard domain to your environment, specify a "),e("code",[t._v("*")]),t._v(" as the subdomain:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environments")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("production")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("domain")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*.example.com'")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])]),e("h2",{attrs:{id:"maintenance-mode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#maintenance-mode"}},[t._v("#")]),t._v(" Maintenance Mode")]),t._v(" "),e("p",[t._v("When deploying a Laravel application using a traditional VPS like those managed by "),e("a",{attrs:{href:"https://forge.laravel.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("Laravel Forge"),e("OutboundLink")],1),t._v(", you may have used the "),e("code",[t._v("php artisan down")]),t._v(' command to place your application in "maintenance mode". To place a Vapor environment in maintenance mode, you may use the Vapor UI or the '),e("code",[t._v("down")]),t._v(" CLI command:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("vapor down production\n")])])]),e("p",[t._v("To remove an environment from maintenance mode, you may use the "),e("code",[t._v("up")]),t._v(" command:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("vapor up production\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Maintenance Mode & Vanity URLs")]),t._v(" "),e("p",[t._v('When an environment is in maintenance mode, the environment\'s custom domain will display a maintenance mode splash screen; however, you may still access the environment via its "vanity URL"')])]),t._v(" "),e("h3",{attrs:{id:"customizing-the-maintenance-mode-screen"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#customizing-the-maintenance-mode-screen"}},[t._v("#")]),t._v(" Customizing The Maintenance Mode Screen")]),t._v(" "),e("p",[t._v("You may customize the maintenance mode splash screen for your application by placing a "),e("code",[t._v("503.html")]),t._v(" file in your application's root directory. In addition, you may also place a "),e("code",[t._v("503.json")]),t._v(" file in your application's root directory for requests asking for JSON responses.")]),t._v(" "),e("h2",{attrs:{id:"commands"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#commands"}},[t._v("#")]),t._v(" Commands")]),t._v(" "),e("p",[t._v("Commands allow you to execute an arbitrary Artisan command against an environment. You may issue a command via the Vapor UI or using the "),e("code",[t._v("command")]),t._v(" CLI command. The "),e("code",[t._v("command")]),t._v(" command will prompt you for the Artisan command you would like to run:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("vapor "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" production\n\nvapor "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" production --command"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"php artisan inspire"')]),t._v("\n")])])]),e("p",[t._v("By default, your command will timeout after one minute. You can configure the timeout of your CLI commands using the "),e("code",[t._v("cli-timeout")]),t._v(" option within your "),e("code",[t._v("vapor.yml")]),t._v(" file. This option allows you to specify the maximum number of seconds a CLI command should be allowed to run:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environments")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("production")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cli-timeout")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])]),e("p",[t._v("Sometimes you may need to run the previous command again. To accomplish this, you may use the Vapor UI or the "),e("code",[t._v("command:again")]),t._v(" CLI command:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Run the previous command again...")]),t._v("\nvapor command:again\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Run a specific command again using the command's ID...")]),t._v("\nvapor command:again "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("\n")])])]),e("h2",{attrs:{id:"memory"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#memory"}},[t._v("#")]),t._v(" Memory")]),t._v(" "),e("p",[t._v("Vapor (via AWS Lambda) allocates CPU power to your Lambda function in proportion to the amount of memory configured for the application. You may increase or decrease the configured memory using the "),e("code",[t._v("memory")]),t._v(" option in your environment's "),e("code",[t._v("vapor.yml")]),t._v(" configuration:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environments")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("production")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("memory")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])]),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("Memory Increments")]),t._v(" "),e("p",[t._v("When configuring the memory for your Lambda function, you may define a value between 128 MB and 10,240 MB in 64-MB increments.")])]),t._v(" "),e("h2",{attrs:{id:"concurrency"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#concurrency"}},[t._v("#")]),t._v(" Concurrency")]),t._v(" "),e("p",[t._v("By default, Vapor will allow your application to process web requests at max concurrency, which is typically 1,000 requests executing at the same time at any given moment across all of your AWS Lambda functions in a given region. If you would like to reduce the maximum web concurrency, you may define the "),e("code",[t._v("concurrency")]),t._v(" option in the environment's "),e("code",[t._v("vapor.yml")]),t._v(" configuration. Additionally, if you need more than 1,000 concurrent requests, you can submit a limit increase request in the AWS Support Center console.")]),t._v(" "),e("p",[t._v("While maximum performance is certainly appealing, in some situations it may make sense to set this value to the maximum concurrency you reasonably expect for your particular application. Otherwise, a DDoS attack against your application could result in larger than expected AWS costs:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environments")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("production")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("concurrency")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])]),e("h2",{attrs:{id:"provisioned-concurrency"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#provisioned-concurrency"}},[t._v("#")]),t._v(" Provisioned Concurrency")]),t._v(" "),e("p",[t._v('By default, when an environment is deployed, the first request it receives may encounter "cold starts". These requests typically incur a penalty of a few seconds while AWS loads a serverless container to serve the request. Once a request has been served by that container, it is typically kept warm to serve further requests with no delay.')]),t._v(" "),e("p",[t._v('To mitigate this issue, Amazon supports "provisioned concurrency". When using this feature, the requested number of execution environments / containers will be provisioned and kept "warm" for you automatically, allowing them to immediately serve any incoming requests. To enable this feature, you may add a '),e("code",[t._v("capacity")]),t._v(" configuration option to the environment in your "),e("code",[t._v("vapor.yml")]),t._v(" file:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environments")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("production")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("capacity")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])]),e("p",[t._v("For more information on this feature and its pricing, please consult the "),e("a",{attrs:{href:"https://aws.amazon.com/blogs/aws/new-provisioned-concurrency-for-lambda-functions/",target:"_blank",rel:"noopener noreferrer"}},[t._v("AWS documentation"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("Warming")]),t._v(" "),e("p",[t._v("When using this feature, any "),e("code",[t._v("warm")]),t._v(" values in your "),e("code",[t._v("vapor.yml")]),t._v(" file will be ignored.")])]),t._v(" "),e("h2",{attrs:{id:"prewarming"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prewarming"}},[t._v("#")]),t._v(" Prewarming")]),t._v(" "),e("p",[t._v('By default, when an environment is deployed, the first request it receives may encounter "cold starts". These requests typically incur a penalty of a few seconds while AWS loads a serverless container to serve the request. Once a request has been served by that container, it is typically kept warm to serve further requests with no delay.')]),t._v(" "),e("p",[t._v('To mitigate "cold starts" after a fresh deployment, Vapor allows you to define a '),e("code",[t._v("warm")]),t._v(" configuration value for an environment in your "),e("code",[t._v("vapor.yml")]),t._v(" file. The "),e("code",[t._v("warm")]),t._v(' value represents how many serverless containers Vapor will "pre-warm" by making concurrent requests to the newly deployed application '),e("strong",[t._v("before it is activated for public accessibility")]),t._v(". Vapor will continue to pre-warm this many containers every 5 minutes while the application is deployed so the specified number of containers are always ready to serve requests:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environments")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("production")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("warm")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])]),e("h2",{attrs:{id:"firewall"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#firewall"}},[t._v("#")]),t._v(" Firewall")]),t._v(" "),e("p",[t._v("You may instruct Vapor to automatically configure a firewall that provides basic protection against denial-of-service attacks targeting your environment, as well as protection against pervasive bot traffic that can consume your environment's resources.")]),t._v(" "),e("p",[t._v("Before getting started, keep in mind that Vapor's managed firewall inspects requests using the IP address from the web request origin. Therefore, this feature should only be used if the requests are not already being reversed proxied through a service such as Cloudflare. "),e("strong",[t._v("If you are already using a reverse proxy, you should not use this feature")]),t._v(".")]),t._v(" "),e("p",[t._v("You may use Vapor's managed firewall by defining the "),e("code",[t._v("firewall")]),t._v(" configuration option within your application's "),e("code",[t._v("vapor.yml")]),t._v(" file:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environments")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("production")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("firewall")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("rate-limit")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("bot-control")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CategorySearchEngine\n                "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CategorySocialMedia\n                "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CategoryScrapingFramework\n")])])]),e("h3",{attrs:{id:"rate-limit"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rate-limit"}},[t._v("#")]),t._v(" "),e("code",[t._v("rate-limit")])]),t._v(" "),e("p",[t._v("When using the "),e("code",[t._v("rate-limit")]),t._v(" option, Vapor's managed firewall tracks the rate of requests for each originating IP address and blocks IPs with request rates over the given "),e("code",[t._v("rate-limit")]),t._v(" value. In the example above, if the request count for an IP address exceeds 1,000 requests in any 5-minute time span then the firewall will temporarily block requests from that IP address with the "),e("code",[t._v("403 Forbidden")]),t._v(" HTTP status code.")]),t._v(" "),e("h3",{attrs:{id:"bot-control"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bot-control"}},[t._v("#")]),t._v(" "),e("code",[t._v("bot-control")])]),t._v(" "),e("p",[t._v("When using the "),e("code",[t._v("bot-control")]),t._v(' option, Vapor\'s managed firewall blocks requests from pervasive bots, such as scrapers or search engines. You may customize the "category" of requests the '),e("code",[t._v("bot-control")]),t._v(" should block by providing an "),e("code",[t._v("array")]),t._v(" of categories within your application's "),e("code",[t._v("vapor.yml")]),t._v(" file:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("firewall")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("bot-control")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CategoryAdvertising\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CategoryArchiver\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" SignalNonBrowserUserAgent\n")])])]),e("p",[t._v("Here is the list of available categories you may use:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Category")]),t._v(" "),e("th",[t._v("Description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("CategoryAdvertising")]),t._v(" "),e("td",[t._v("Blocks requests from bots that are used for advertising purposes.")])]),t._v(" "),e("tr",[e("td",[t._v("CategoryArchiver")]),t._v(" "),e("td",[t._v("Blocks requests from bots that are used for archiving purposes.")])]),t._v(" "),e("tr",[e("td",[t._v("CategoryContentFetcher")]),t._v(" "),e("td",[t._v("Blocks requests from bots that are fetching content on behalf of an end-user.")])]),t._v(" "),e("tr",[e("td",[t._v("CategoryHttpLibrary")]),t._v(" "),e("td",[t._v("Blocks requests from HTTP libraries that are often used by bots.")])]),t._v(" "),e("tr",[e("td",[t._v("CategoryLinkChecker")]),t._v(" "),e("td",[t._v("Blocks requests from bots that check for broken links.")])]),t._v(" "),e("tr",[e("td",[t._v("CategoryMiscellaneous")]),t._v(" "),e("td",[t._v("Blocks requests from miscellaneous bots.")])]),t._v(" "),e("tr",[e("td",[t._v("CategoryMonitoring")]),t._v(" "),e("td",[t._v("Blocks requests from bots that are used for monitoring purposes.")])]),t._v(" "),e("tr",[e("td",[t._v("CategoryScrapingFramework")]),t._v(" "),e("td",[t._v("Blocks requests from web scraping frameworks.")])]),t._v(" "),e("tr",[e("td",[t._v("CategorySecurity")]),t._v(" "),e("td",[t._v("Blocks requests from security-related bots.")])]),t._v(" "),e("tr",[e("td",[t._v("CategorySeo")]),t._v(" "),e("td",[t._v("Blocks requests from bots that are used for search engine optimization.")])]),t._v(" "),e("tr",[e("td",[t._v("CategorySocialMedia")]),t._v(" "),e("td",[t._v("Blocks requests from bots that are used by social media platforms to provide content summaries. Verified social media bots are not blocked.")])]),t._v(" "),e("tr",[e("td",[t._v("CategorySearchEngine")]),t._v(" "),e("td",[t._v("Blocks requests from search engine bots. Verified search engines are not blocked.")])]),t._v(" "),e("tr",[e("td",[t._v("SignalAutomatedBrowser")]),t._v(" "),e("td",[t._v("Blocks requests with indications of an automated web browser.")])]),t._v(" "),e("tr",[e("td",[t._v("SignalKnownBotDataCenter")]),t._v(" "),e("td",[t._v("Blocks requests from data centers that are typically used by bots.")])]),t._v(" "),e("tr",[e("td",[t._v("SignalNonBrowserUserAgent")]),t._v(" "),e("td",[t._v("Blocks requests with user-agent strings that don't seem to be from a web browser.")])])])]),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("API Gateway v2")]),t._v(" "),e("p",[t._v("Due to AWS limitations, Vapor's managed firewall does not support API Gateway v2.")])]),t._v(" "),e("p",[t._v("Behind the scenes, Vapor's managed firewall uses "),e("strong",[e("a",{attrs:{href:"https://aws.amazon.com/waf/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Amazon WAF"),e("OutboundLink")],1)]),t._v(", creating a Web ACL with one rate-based rule per Vapor environment. Feel free to check out the AWS WAF documentation for more information about WAF and its pricing.")]),t._v(" "),e("h2",{attrs:{id:"timeout"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#timeout"}},[t._v("#")]),t._v(" Timeout")]),t._v(" "),e("p",[t._v("By default, Vapor will limit web request execution time to 10 seconds. If you would like to change the timeout value, you may add a "),e("code",[t._v("timeout")]),t._v(" value (in seconds) to the environment's configuration. Note that AWS does not allow Lambda executions to process for more than 15 minutes:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environments")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("production")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("timeout")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Detecting Timeouts In Logs")]),t._v(" "),e("p",[t._v("Remember, you can use the "),e("RouterLink",{attrs:{to:"/1.0/introduction.html#installing-the-vapor-ui-dashboard"}},[t._v("Vapor UI dashboard package")]),t._v(" to search for timeout occurrences.")],1)]),t._v(" "),e("h2",{attrs:{id:"scheduler"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scheduler"}},[t._v("#")]),t._v(" Scheduler")]),t._v(" "),e("p",[t._v("Vapor automatically configures Laravel's task scheduler and instructs it to use the DynamoDB cache driver to avoid overlapping tasks, so no other configuration is required to begin leveraging Laravel's scheduled task feature.")]),t._v(" "),e("p",[t._v("If you would like to disable the scheduler, you may set an environment's "),e("code",[t._v("scheduler")]),t._v(" option to "),e("code",[t._v("false")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environments")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("production")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("scheduler")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])]),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("Log Messages")]),t._v(" "),e("p",[t._v("Due to Vapor limitations, log messages from scheduled tasks will not appear in AWS CloudWatch or Vapor UI. As a workaround, you should dispatch a queued job from your scheduled tasks and write log messages from your queued job.")])]),t._v(" "),e("h2",{attrs:{id:"mail"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mail"}},[t._v("#")]),t._v(" Mail")]),t._v(" "),e("p",[t._v("Laravel provides a clean, simple email API. And, by default, Vapor will automatically configure your environment to use "),e("strong",[e("a",{attrs:{href:"https://aws.amazon.com/ses/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Amazon SES"),e("OutboundLink")],1)]),t._v(" as the default mail driver by injecting the proper Laravel environment variables during deployment. Of course, you may change the default mail driver by defining a different value for the "),e("code",[t._v("MAIL_MAILER")]),t._v(" environment variable.")]),t._v(" "),e("p",[t._v("If you plan to use Amazon SES as your application's mail service, you should "),e("a",{attrs:{href:"#custom-domains"}},[t._v("attach a domain")]),t._v(" to your environment. Once attached and deployed, Vapor will automatically update the domain's DNS records so Amazon SES can validate the domain and configure DKIM. These DNS records are necessary to protect your reputation as a sender.")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("Self-Managed Domains")]),t._v(" "),e("p",[t._v("If you self-manage your domain's DNS records, Vapor will not be able to update the domain's DNS records automatically. Therefore, you should run the "),e("code",[t._v("vapor record:list domain-name.com")]),t._v(" command to view the records that Vapor indicates are required for your domain and update your DNS records accordingly.")])]),t._v(" "),e("p",[t._v('By default, Vapor configures the "From Address" and "From Name" Laravel configuration settings with '),e("code",[t._v("hello@your-domain.com")]),t._v(" and "),e("code",[t._v("Your Project Name")]),t._v(", respectively. Of course, you're free to modify these values by defining new values for the "),e("code",[t._v("MAIL_FROM_ADDRESS")]),t._v(" and "),e("code",[t._v("MAIL_FROM_NAME")]),t._v(" environment variables.")]),t._v(" "),e("p",[t._v('Finally, if you haven\'t used Amazon SES before, your SES account will be in "sandbox" mode. Sandbox mode only allows you to send emails to manually verified domains. To move out of SES sandbox mode, follow these instructions: '),e("strong",[e("a",{attrs:{href:"https://docs.aws.amazon.com/ses/latest/DeveloperGuide/request-production-access.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.aws.amazon.com/ses/latest/DeveloperGuide/request-production-access.html"),e("OutboundLink")],1)]),t._v(".")]),t._v(" "),e("h2",{attrs:{id:"metrics"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#metrics"}},[t._v("#")]),t._v(" Metrics")]),t._v(" "),e("p",[t._v("A variety of environment performance metrics may be found in the Vapor UI or using the "),e("code",[t._v("metrics")]),t._v(" CLI command:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("vapor metrics production\nvapor metrics production 5m\nvapor metrics production 30m\nvapor metrics production 1h\nvapor metrics production 8h\nvapor metrics production 1d\nvapor metrics production 3d\nvapor metrics production 7d\nvapor metrics production 1M\n")])])]),e("h3",{attrs:{id:"alarms"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#alarms"}},[t._v("#")]),t._v(" Alarms")]),t._v(" "),e("p",[t._v("You may configure alarms for all environment metrics using the Vapor UI. These alarms will notify you via the notification method of your choice when an alarm's configured threshold is broken and when an alarm recovers.")]),t._v(" "),e("h2",{attrs:{id:"runtime"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#runtime"}},[t._v("#")]),t._v(" Runtime")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("runtime")]),t._v(" configuration option allows you to specify the runtime a given environment runs on.")]),t._v(" "),e("h3",{attrs:{id:"native-runtimes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#native-runtimes"}},[t._v("#")]),t._v(" Native Runtimes")]),t._v(" "),e("p",[t._v("The currently supported native runtimes are "),e("code",[t._v("php-7.3")]),t._v(", "),e("code",[t._v("php-7.4")]),t._v(", "),e("code",[t._v("php-7.4:al2")]),t._v(", "),e("code",[t._v("php-8.0")]),t._v(", "),e("code",[t._v("php-8.0:al2")]),t._v(", and "),e("code",[t._v("php-8.1:al2")]),t._v(". The runtimes that are suffixed with "),e("code",[t._v("al2")]),t._v(" use Amazon Linux 2 while those without the suffix use Amazon Linux 1:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environments")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("production")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runtime")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'php-8.1:al2'")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])]),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("Amazon Linux 2")]),t._v(" "),e("p",[t._v("Using "),e("a",{attrs:{href:"https://aws.amazon.com/amazon-linux-2/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Amazon Linux 2"),e("OutboundLink")],1),t._v(" ("),e("code",[t._v("php-7.4:al2")]),t._v(", "),e("code",[t._v("php-8.0:al2")]),t._v(", "),e("code",[t._v("php-8.1:al2")]),t._v(") is "),e("strong",[t._v("highly recommended")]),t._v(", as Amazon Linux 1 is no longer maintained as of December 31, 2020.")])]),t._v(" "),e("p",[t._v("The following limitations apply to Vapor native runtimes:")]),t._v(" "),e("ul",[e("li",[t._v("The application size, including the runtime itself, must not exceed 250MB.")]),t._v(" "),e("li",[t._v("Additional PHP extensions or libraries (such as "),e("code",[t._v("imagick")]),t._v(") can not be installed.")])]),t._v(" "),e("h3",{attrs:{id:"docker-runtimes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-runtimes"}},[t._v("#")]),t._v(" Docker Runtimes")]),t._v(" "),e("p",[t._v("Docker based runtimes allow you to package and deploy applications up to 10GB in size and allow you to install additional PHP extensions or libraries by updating the environment's corresponding "),e("code",[t._v(".Dockerfile")]),t._v(". For every new Docker based environment, Vapor creates a "),e("code",[t._v(".Dockerfile")]),t._v(" file within your application that uses one of Vapor's base images as a starting point for building your image. All of Vapor's Docker images are based on Alpine Linux:")]),t._v(" "),e("div",{staticClass:"language-docker extra-class"},[e("pre",{pre:!0,attrs:{class:"language-docker"}},[e("code",[e("span",{pre:!0,attrs:{class:"token instruction"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" laravelphp/vapor:php81")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token instruction"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COPY")]),t._v(" . /var/task")]),t._v("\n")])])]),e("p",[t._v("If you would like to use a Docker image instead of the Vapor native runtimes, set the "),e("code",[t._v("runtime")]),t._v(" configuration option to "),e("code",[t._v("docker")]),t._v(" within your "),e("code",[t._v("vapor.yml")]),t._v(" file:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environments")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("production")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runtime")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" docker\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])]),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("Migrating Existing Environments To A Docker Runtime")]),t._v(" "),e("p",[t._v("When migrating an existing environment to a Docker runtime, please keep in mind that you won't be able to revert that environment to the default Vapor Lambda runtime later. For that reason, you may want to create an environment for testing the Docker runtime first.")])]),t._v(" "),e("p",[t._v("Vapor will build, tag, and publish your environment's image during your deployments; therefore, you should ensure that you have installed "),e("a",{attrs:{href:"https://docs.docker.com/get-docker/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker"),e("OutboundLink")],1),t._v(" on your local machine. Vapor's base Docker images are:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("laravelphp/vapor:php74")])]),t._v(" "),e("li",[e("code",[t._v("laravelphp/vapor:php80")])]),t._v(" "),e("li",[e("code",[t._v("laravelphp/vapor:php81")])])]),t._v(" "),e("p",[t._v("Of course, you are free to modify your environment's "),e("code",[t._v("Dockerfile")]),t._v(" to install additional dependencies or PHP extensions. Here are a few examples:")]),t._v(" "),e("div",{staticClass:"language-docker extra-class"},[e("pre",{pre:!0,attrs:{class:"language-docker"}},[e("code",[e("span",{pre:!0,attrs:{class:"token instruction"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" laravelphp/vapor:php81")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Add the `ffmpeg` library...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token instruction"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" apk --update add ffmpeg")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Add the `mysql` client...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token instruction"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" apk --update add mysql-client")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Add the `gmp` PHP extension...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token instruction"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" apk --update add gmp gmp-dev")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token instruction"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" docker-php-ext-install gmp")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Update the `php.ini` file...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Requires a `php.ini` file at the root of your project...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token instruction"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COPY")]),t._v(" ./php.ini /usr/local/etc/php/conf.d/overrides.ini")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Place application in Lambda application directory...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token instruction"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COPY")]),t._v(" . /var/task")]),t._v("\n")])])]),e("h4",{attrs:{id:"docker-build-arguments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-build-arguments"}},[t._v("#")]),t._v(" Docker Build Arguments")]),t._v(" "),e("p",[t._v("When using Docker, is common to use "),e("code",[t._v("ARG")]),t._v(" instructions in "),e("code",[t._v(".Dockerfile")]),t._v(" files to define build-time variables:")]),t._v(" "),e("div",{staticClass:"language-docker extra-class"},[e("pre",{pre:!0,attrs:{class:"language-docker"}},[e("code",[e("span",{pre:!0,attrs:{class:"token instruction"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ARG")]),t._v(" VERSION=php81")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token instruction"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" laravelphp/vapor:"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${VERSION}")])]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token instruction"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COPY")]),t._v(" . /var/task")]),t._v("\n")])])]),e("p",[t._v("You may set Docker build arguments via the "),e("code",[t._v("docker-build-args")]),t._v(" configuration option within your application's "),e("code",[t._v("vapor.yml")]),t._v(" file:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environments")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("production")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runtime")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" docker\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("docker-build-args")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("VERSION")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" php81\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])]),e("p",[t._v("Alternatively, you may provide one or multiple "),e("code",[t._v("--build-arg")]),t._v(" options to the "),e("code",[t._v("deploy")]),t._v(" Vapor CLI command to specify the values of the build arguments:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("vapor deploy --build-arg "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("VERSION")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("php74 --build-arg "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("KEY")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("value\n")])])]),e("h2",{attrs:{id:"octane"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#octane"}},[t._v("#")]),t._v(" Octane")]),t._v(" "),e("p",[t._v("By default, when Lambda receives HTTP requests, Vapor sends those requests synchronously to PHP-FPM using the FastCGI Protocol. This means every incoming request spawns a PHP-FPM worker and boots your application. This approach ensures Vapor behaves exactly like a traditional web server.")]),t._v(" "),e("p",[t._v("If you wish to reduce the overhead involved in using PPM-FPM, you may opt-in to "),e("strong",[t._v("Laravel "),e("a",{attrs:{href:"https://laravel.com/docs/8.x/octane",target:"_blank",rel:"noopener noreferrer"}},[t._v("Octane"),e("OutboundLink")],1)]),t._v(" support on Vapor. Octane can increase your application's performance by booting your application once, keeping it in memory, and then feeding that same application instance requests as they are received.")]),t._v(" "),e("p",[t._v("To get started, "),e("a",{attrs:{href:"https://laravel.com/docs/8.x/octane#installation",target:"_blank",rel:"noopener noreferrer"}},[t._v("install Laravel Octane"),e("OutboundLink")],1),t._v(" in your project. After installing Octane, don't forget to review important "),e("a",{attrs:{href:"https://laravel.com/docs/8.x/octane",target:"_blank",rel:"noopener noreferrer"}},[t._v("Octane documentation"),e("OutboundLink")],1),t._v(" topics such as "),e("a",{attrs:{href:"https://laravel.com/docs/8.x/octane#dependency-injection-and-octane",target:"_blank",rel:"noopener noreferrer"}},[t._v("dependency injection"),e("OutboundLink")],1),t._v(" and "),e("a",{attrs:{href:"https://laravel.com/docs/8.x/octane#managing-memory-leaks",target:"_blank",rel:"noopener noreferrer"}},[t._v("managing memory leaks"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("p",[t._v("Finally, you may instruct Vapor to use Octane by setting the "),e("code",[t._v("octane")]),t._v(" configuration option within your application's "),e("code",[t._v("vapor.yml")]),t._v(" file:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" my"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("application\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environments")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("staging")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("memory")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runtime")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'php-8.1:al2'")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("octane")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n")])])]),e("p",[t._v("In addition, if your project uses a database, you may use the "),e("code",[t._v("octane-database-session-persist")]),t._v(" and "),e("code",[t._v("octane-database-session-ttl")]),t._v(" options to instruct Octane that database connections should be reused between requests:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[t._v("        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("database")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" my"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("database\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("octane")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("octane-database-session-persist")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("octane-database-session-ttl")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n")])])]),e("ul",[e("li",[t._v("The "),e("code",[t._v("octane-database-session-persist")]),t._v(" option indicates that database connections should persist between requests. The main purpose of this option is to reduce the overhead involved on creating a database connection on each request.")]),t._v(" "),e("li",[t._v("The "),e("code",[t._v("octane-database-session-ttl")]),t._v(" option allows specifying the time (in seconds) the Lambda container should stay connected to the database when the Lambda container is not being used. This option is only available for MySQL fixed size databases.")])]),t._v(" "),e("p",[e("strong",[t._v("We recommended that you specify an "),e("code",[t._v("octane-database-session-ttl")]),t._v(" value")]),t._v("; otherwise, the Lambda container will stay connected to your database until the Lambda container gets destroyed. This may take several minutes and may result in your database becoming overwhelmed with active connections.")]),t._v(" "),e("h2",{attrs:{id:"gateway-versions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gateway-versions"}},[t._v("#")]),t._v(" Gateway Versions")]),t._v(" "),e("p",[t._v("By default, Vapor routes HTTP traffic to your serverless applications using AWS API Gateway v1 (REST APIs). Your application may run on either API Gateway v1 (REST APIs) or API Gateway v2 (HTTP APIs). By default, applications deploy using API Gateway v1 as it provides a fuller feature set such as Vapor's managed Firewall, and more.")]),t._v(" "),e("p",[t._v("However, API Gateway v2 offers a cost reduction per million requests to your application ($1.00 per million vs. $3.50 per million). If you would like to use API Gateway v2, you may specify the "),e("code",[t._v("gateway-version")]),t._v(" configuration option for a given environment in your "),e("code",[t._v("vapor.yml")]),t._v(" file:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environments")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("production")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway-version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])]),e("h3",{attrs:{id:"http-to-https-redirection-with-api-gateway-v2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#http-to-https-redirection-with-api-gateway-v2"}},[t._v("#")]),t._v(" HTTP to HTTPS Redirection With API Gateway v2")]),t._v(" "),e("p",[t._v("If you choose to use API Gateway v2 and would like to support HTTP to HTTPS redirection, we currently suggest using "),e("a",{attrs:{href:"https://cloudflare.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cloudflare"),e("OutboundLink")],1),t._v(" as an external DNS provider for your Vapor application. Cloudflare not only provides DNS, but serves as a reverse proxy to your application and features an option for automatic HTTP to HTTPS redirection.")]),t._v(" "),e("p",[t._v("After a Vapor deployment is completed, Vapor will provide you with CNAME records for the domain(s) associated with your environment. These records will point the domain to your Lambda application. You should manually add these values as CNAME records within the Cloudflare DNS dashboard.")]),t._v(" "),e("p",[t._v('In addition, when using Cloudflare, you should set your Cloudflare SSL / TLS mode to "Full". The "Always Use HTTPS" configuration option may be found under the SSL / TLS menu\'s "Edge Certificates" tab.')]),t._v(" "),e("h2",{attrs:{id:"custom-vpcs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#custom-vpcs"}},[t._v("#")]),t._v(" Custom VPCs")]),t._v(" "),e("p",[t._v("If you want to place your Lambda functions within a VPC that is not managed by Vapor, you may specify the "),e("code",[t._v("subnets")]),t._v(" and "),e("code",[t._v("security-groups")]),t._v(" configuration options for a given environment in your "),e("code",[t._v("vapor.yml")]),t._v(" file:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environments")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("production")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("subnets")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" subnet"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("08aczain4man8bba7\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" subnet"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("08acr4nd0mbba7\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("security-groups")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" sg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("0cr4and0m45b7e0\n")])])]),e("h2",{attrs:{id:"deleting-environments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deleting-environments"}},[t._v("#")]),t._v(" Deleting Environments")]),t._v(" "),e("p",[t._v("Environments may be deleted via the Vapor UI or using the "),e("code",[t._v("env:delete")]),t._v(" CLI command:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("vapor env:delete testing\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);